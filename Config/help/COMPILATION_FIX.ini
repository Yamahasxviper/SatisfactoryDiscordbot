; ===========================================================================================
; COMPILATION FIX - Discord Chat Bridge
; ===========================================================================================
; Solutions for common compilation and build issues
; ===========================================================================================

[Overview]
Title=Compilation Fix Guide
Purpose=Solutions for common build issues
Audience=Developers building from source

; ===========================================================================================
; WEBSOCKETS BUILD ERROR
; ===========================================================================================

[Error_WebSocketsNotFound]
Error=Unable to find plugin 'WebSockets'
Message=Unable to find plugin 'WebSockets' (referenced via FactoryGame.uproject). Install it and try again, or remove it from the required plugin list.
Status=Significantly less likely to occur
Reason=DiscordChatBridge.Build.cs now automatically detects WebSockets availability

[Fix_WebSocketsAutoDetection]
Solution=Automatic WebSockets Detection
Implementation=DiscordChatBridge.Build.cs
Behavior1=WebSockets marked as optional in FactoryGame.uproject
Behavior2=Build system automatically detects if WebSockets exists
Behavior3=If WebSockets not found, builds without Gateway features
Behavior4=If WebSockets found, full functionality enabled
Result=No build errors even if WebSockets missing

; ===========================================================================================
; WEBSOCKETS LIBRARY LINK ERROR
; ===========================================================================================

[Error_WebSocketsLib]
Error=cannot open input file UnrealEditor-WebSockets.lib
FullMessage=cannot open input file '..\Intermediate\Build\Win64\x64\UnrealEditor\Development\WebSockets\UnrealEditor-WebSockets.lib'
Cause=WebSockets plugin not built with engine
Platform=Windows

[Fix_WebSocketsLib]
Solution1=Use Unreal Engine 5.3.2-CSS (includes WebSockets)
Solution2=Use standard UE 5.3.2 from Epic (includes WebSockets)
Solution3=Build UE from source (WebSockets compiles automatically)
Solution4=Build mod without Gateway features (automatic fallback)
Recommended=Use official CSS UE build for full compatibility

; ===========================================================================================
; ENGINE VERSION MISMATCH
; ===========================================================================================

[Error_EngineVersion]
Error=Engine version mismatch
Cause=Using wrong Unreal Engine version
Required=Unreal Engine 5.3.2-CSS
Acceptable=Unreal Engine 5.3.2 from Epic

[Fix_EngineVersion]
Solution=Download correct engine version
CSSEngine=Unreal Engine 5.3.2-CSS from satisfactorymodding
EpicEngine=Unreal Engine 5.3.2 from Epic Games Launcher
Build=Or build from source (advanced)

; ===========================================================================================
; BUILD FILES OUT OF DATE
; ===========================================================================================

[Error_OutdatedBuildFiles]
Error=Build files are out of date
Message=The build files are out of date. Would you like to rebuild them?
Cause=Intermediate files don't match current source

[Fix_OutdatedBuildFiles_Windows]
Platform=Windows
Step1=Delete Intermediate/ directory
Step2=Delete Saved/ directory
Step3=Delete *.sln, *.vcxproj* files
Step4=Right-click FactoryGame.uproject
Step5=Select "Generate Visual Studio project files"

[Fix_OutdatedBuildFiles_Linux]
Platform=Linux
Step1=Delete Intermediate/ directory
Step2=Delete Saved/ directory
Step3=Delete generated project files
Step4=Regenerate using UnrealBuildTool

; ===========================================================================================
; UNREALBUILDTOOL ERRORS
; ===========================================================================================

[Error_UBT]
Error=UnrealBuildTool errors
Symptoms=Various build tool errors
Cause=Corrupted UBT cache

[Fix_UBT_Windows]
Platform=Windows
Action=Delete UBT cache
Location=%LOCALAPPDATA%\UnrealBuildTool
Command=Remove-Item "$env:LOCALAPPDATA\UnrealBuildTool" -Recurse -Force
Then=Regenerate project files

[Fix_UBT_Linux]
Platform=Linux
Action=Delete UBT cache
Location=~/.local/share/UnrealBuildTool
Command=rm -rf ~/.local/share/UnrealBuildTool
Then=Regenerate project files

; ===========================================================================================
; MISSING SML DEPENDENCY
; ===========================================================================================

[Error_MissingSML]
Error=Cannot find SML modules
Message=Cannot find FactoryGame or SML modules
Cause=SML not present or not built

[Fix_MissingSML]
Solution=Ensure SML is present and built
Check1=Verify Mods/SML directory exists
Check2=Ensure SML is version 3.11.3 or later
Check3=Build SML before building DiscordChatBridge
Order=SML must be built first (dependency)

; ===========================================================================================
; WWISE PLUGIN MISSING
; ===========================================================================================

[Error_Wwise]
Error=Cannot find Wwise plugin
Cause=Wwise not downloaded during build
Note=Wwise is a Satisfactory dependency, not Discord bridge

[Fix_Wwise_CI]
Environment=CI/Automated Builds
Solution=Wwise downloaded automatically from B2 bucket
Workflow=GitHub Actions workflow handles download
Credentials=Requires correct B2 credentials in workflow

[Fix_Wwise_Local]
Environment=Local Development
Solution=Download Wwise manually or use CI build
Manual=Download from Coffee Stain's B2 bucket
Automatic=Or wait for CI build to complete

; ===========================================================================================
; CLEAN BUILD PROCEDURE
; ===========================================================================================

[CleanBuild_Windows]
Title=Clean Build Procedure (Windows)
Step1=Close Visual Studio
Step2=Delete Intermediate/ directory
Step3=Delete Saved/ directory  
Step4=Delete *.sln and *.vcxproj* files
Step5=Delete %LOCALAPPDATA%\UnrealEngine cache
Step6=Delete %LOCALAPPDATA%\UnrealBuildTool cache
Step7=Right-click FactoryGame.uproject
Step8=Select "Generate Visual Studio project files"
Step9=Open .sln file in Visual Studio
Step10=Build solution

[CleanBuild_Linux]
Title=Clean Build Procedure (Linux)
Step1=Delete Intermediate/ directory
Step2=Delete Saved/ directory
Step3=Delete generated project files
Step4=Delete ~/.local/share/UnrealEngine cache
Step5=Delete ~/.local/share/UnrealBuildTool cache
Step6=Regenerate project files
Step7=Build using UnrealBuildTool or Make

; ===========================================================================================
; VERIFICATION STEPS
; ===========================================================================================

[Verification_EngineInstall]
Check=Verify Engine Installation
Windows=Check <UE_ROOT>\Engine\Binaries\Win64\UnrealEditor.exe exists
Linux=Check <UE_ROOT>/Engine/Binaries/Linux/UnrealEditor exists
Version=Verify version is 5.3.2-CSS

[Verification_WebSockets]
Check=Verify WebSockets Plugin
Windows=Check <UE_ROOT>\Engine\Plugins\Runtime\WebSockets\ exists
Linux=Check <UE_ROOT>/Engine/Plugins/Runtime/WebSockets/ exists
Contents=Should contain WebSockets.uplugin file
Note=Optional - mod works without WebSockets (reduced features)

[Verification_SML]
Check=Verify SML Installation
Location=Mods/SML directory
Version=Should be 3.11.3 or later
Built=Check for compiled SML modules in Binaries/

[Verification_ProjectStructure]
Check=Verify Project Structure
Root=FactoryGame.uproject should be in root
Mods=Mods/ directory should contain SML and DiscordChatBridge
Config=Config/ directories should exist
Source=Source/ directory should exist

; ===========================================================================================
; PLATFORM-SPECIFIC ISSUES
; ===========================================================================================

[Platform_Windows_PathLength]
Platform=Windows
Issue=Path too long errors
Cause=Windows MAX_PATH limitation (260 characters)
Solution1=Use shorter project path (e.g., C:\SML instead of long path)
Solution2=Enable long path support in Windows 10/11
Solution3=Use symbolic links to shorten paths

[Platform_Linux_Permissions]
Platform=Linux
Issue=Permission denied errors
Cause=Incorrect file permissions
Solution=Ensure execute permissions on build scripts
Command=chmod +x *.sh
Check=Verify user has write access to build directories

[Platform_Linux_Dependencies]
Platform=Linux
Issue=Missing system dependencies
Packages=build-essential, clang, mono-complete
Install=sudo apt-get install build-essential clang mono-complete
Note=Required for Unreal Engine on Linux

; ===========================================================================================
; CI/CD SPECIFIC
; ===========================================================================================

[CI_CacheIssues]
Environment=CI/CD
Issue=Build cache causing issues
Solution=Clear GitHub Actions cache
Action=Delete cache from GitHub repository settings
Restart=Trigger new workflow run

[CI_SecretsNotSet]
Environment=CI/CD
Issue=External contributor PR fails
Cause=Secrets not available to external contributors
Expected=This is intentional security behavior
Note=Team will build locally to test external PRs

; ===========================================================================================
; GETTING HELP
; ===========================================================================================

[Help_Resources]
BuildRequirements=See BUILD_REQUIREMENTS.md
Troubleshooting=See TROUBLESHOOTING.md in repository root
TechnicalArchitecture=See TECHNICAL_ARCHITECTURE.ini
Dependencies=See DEPENDENCY_EXPLANATION.ini
Community=Join Discord server at discord.gg/QzcG9nX

[Help_ReportingIssues]
Where=GitHub Issues
Include1=Full error message and stack trace
Include2=Unreal Engine version
Include3=Platform (Windows/Linux)
Include4=Build configuration (Debug/Development/Shipping)
Include5=Steps to reproduce
